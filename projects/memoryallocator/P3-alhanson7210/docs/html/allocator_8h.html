<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Memory Allocator: allocator.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Memory Allocator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">allocator.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
</div>
<p><a href="allocator_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmem__block.html">mem_block</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a16e4f54f08fa2ef1574b413d64a94d44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a16e4f54f08fa2ef1574b413d64a94d44">print_memory</a> (void)</td></tr>
<tr class="memdesc:a16e4f54f08fa2ef1574b413d64a94d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints out the current memory state, including both the regions and blocks. Entries are printed in order, so there is an implied link from the topmost entry to the next, and so on.  <a href="allocator_8h.html#a16e4f54f08fa2ef1574b413d64a94d44">More...</a><br /></td></tr>
<tr class="separator:a16e4f54f08fa2ef1574b413d64a94d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a50f56d0ca25cf15ae958e096a9776"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a22a50f56d0ca25cf15ae958e096a9776">write_memory</a> (FILE *fp)</td></tr>
<tr class="memdesc:a22a50f56d0ca25cf15ae958e096a9776"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints out the current memory state, including both the regions and blocks. Entries are printed in order, so there is an implied link from the topmost entry to the next, and so on.  <a href="allocator_8h.html#a22a50f56d0ca25cf15ae958e096a9776">More...</a><br /></td></tr>
<tr class="separator:a22a50f56d0ca25cf15ae958e096a9776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512132f6d325316860cc6ac6bf0a366c"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a512132f6d325316860cc6ac6bf0a366c">reuse</a> (size_t size)</td></tr>
<tr class="memdesc:a512132f6d325316860cc6ac6bf0a366c"><td class="mdescLeft">&#160;</td><td class="mdescRight">reuse returns the first memory region that the requested allocation size fits into -which includes the size fo the <a class="el" href="structmem__block.html">mem_block</a> struct that will be split  <a href="allocator_8h.html#a512132f6d325316860cc6ac6bf0a366c">More...</a><br /></td></tr>
<tr class="separator:a512132f6d325316860cc6ac6bf0a366c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0d19cf0c75e35fef6e0c1248dc781e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#aec0d19cf0c75e35fef6e0c1248dc781e">malloc_name</a> (size_t size, char *name)</td></tr>
<tr class="memdesc:aec0d19cf0c75e35fef6e0c1248dc781e"><td class="mdescLeft">&#160;</td><td class="mdescRight">To perform the allocation, place a metadata struct at the start of a free memory address and then return a pointer to the ‘data’ portion of the memory shown in the first figure.  <a href="allocator_8h.html#aec0d19cf0c75e35fef6e0c1248dc781e">More...</a><br /></td></tr>
<tr class="separator:aec0d19cf0c75e35fef6e0c1248dc781e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac38fce3243a7dcf448301ee9ffd392"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">malloc</a> (size_t size)</td></tr>
<tr class="memdesc:a7ac38fce3243a7dcf448301ee9ffd392"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocating memory from a given ammount of bytes given from size; returning the needed space via malloc_name; it handles resizing over-allocated space, memory allocation of new memory, or returns NULL if certain sizes are.  <a href="allocator_8h.html#a7ac38fce3243a7dcf448301ee9ffd392">More...</a><br /></td></tr>
<tr class="separator:a7ac38fce3243a7dcf448301ee9ffd392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbedc913aa4651b3c3b4b3aecd9b4711"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">free</a> (void *ptr)</td></tr>
<tr class="memdesc:afbedc913aa4651b3c3b4b3aecd9b4711"><td class="mdescLeft">&#160;</td><td class="mdescRight">set usage to zero or unmap memory region  <a href="allocator_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">More...</a><br /></td></tr>
<tr class="separator:afbedc913aa4651b3c3b4b3aecd9b4711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b7798461bd461da64c5f9d35feddf7"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a62b7798461bd461da64c5f9d35feddf7">calloc</a> (size_t nmemb, size_t size)</td></tr>
<tr class="memdesc:a62b7798461bd461da64c5f9d35feddf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="allocator_8c.html#a62b7798461bd461da64c5f9d35feddf7" title="The calloc() function allocates memory for an array of nmemb elements of size bytes each and returns ...">calloc()</a> function allocates memory for an array of nmemb elements of size bytes each and returns a pointer to the allocated memory.  <a href="allocator_8h.html#a62b7798461bd461da64c5f9d35feddf7">More...</a><br /></td></tr>
<tr class="separator:a62b7798461bd461da64c5f9d35feddf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a6b5e8d2f1c37e5b43e4345586075be"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="allocator_8h.html#a1a6b5e8d2f1c37e5b43e4345586075be">realloc</a> (void *ptr, size_t size)</td></tr>
<tr class="memdesc:a1a6b5e8d2f1c37e5b43e4345586075be"><td class="mdescLeft">&#160;</td><td class="mdescRight">memory block of memory sectioned out into chunks, new space within a region, or NULL if there were any issues raised  <a href="allocator_8h.html#a1a6b5e8d2f1c37e5b43e4345586075be">More...</a><br /></td></tr>
<tr class="separator:a1a6b5e8d2f1c37e5b43e4345586075be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Function prototypes and globals for our memory allocator implementation. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a62b7798461bd461da64c5f9d35feddf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b7798461bd461da64c5f9d35feddf7">&#9670;&nbsp;</a></span>calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* calloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The <a class="el" href="allocator_8c.html#a62b7798461bd461da64c5f9d35feddf7" title="The calloc() function allocates memory for an array of nmemb elements of size bytes each and returns ...">calloc()</a> function allocates memory for an array of nmemb elements of size bytes each and returns a pointer to the allocated memory. </p>
<p>calloc will clear the memory and return NULL if overflow occurs, </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>requested allocation size </td></tr>
    <tr><td class="paramname">nmemb</td><td>elements of size bytes each and returns a pointer to the allocated memory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afbedc913aa4651b3c3b4b3aecd9b4711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbedc913aa4651b3c3b4b3aecd9b4711">&#9670;&nbsp;</a></span>free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set usage to zero or unmap memory region </p>
<p>The <a class="el" href="allocator_8c.html#afbedc913aa4651b3c3b4b3aecd9b4711" title="set usage to zero or unmap memory region">free()</a> function frees the memory space pointed to by ptr, which must have been returned by a previous call to <a class="el" href="allocator_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="allocating memory from a given ammount of bytes given from size; returning the needed space via mallo...">malloc()</a>, <a class="el" href="allocator_8c.html#a62b7798461bd461da64c5f9d35feddf7" title="The calloc() function allocates memory for an array of nmemb elements of size bytes each and returns ...">calloc()</a>, or <a class="el" href="allocator_8c.html#a1a6b5e8d2f1c37e5b43e4345586075be" title="memory block of memory sectioned out into chunks, new space within a region, or NULL if there were an...">realloc()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>memory block pointed to by ptr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ac38fce3243a7dcf448301ee9ffd392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ac38fce3243a7dcf448301ee9ffd392">&#9670;&nbsp;</a></span>malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocating memory from a given ammount of bytes given from size; returning the needed space via malloc_name; it handles resizing over-allocated space, memory allocation of new memory, or returns NULL if certain sizes are. </p>
<p>malloc calls malloc_name to allocate memory via mmap NOTE: an integer overflow would not be detected in malloc(nmemb * size); </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>requested allocation size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aec0d19cf0c75e35fef6e0c1248dc781e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec0d19cf0c75e35fef6e0c1248dc781e">&#9670;&nbsp;</a></span>malloc_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* malloc_name </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To perform the allocation, place a metadata struct at the start of a free memory address and then return a pointer to the ‘data’ portion of the memory shown in the first figure. </p>
<p>Request new memory regions from the kernel via mmap </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>requested allocation size </td></tr>
    <tr><td class="paramname">name</td><td>name of the allocated block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16e4f54f08fa2ef1574b413d64a94d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e4f54f08fa2ef1574b413d64a94d44">&#9670;&nbsp;</a></span>print_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_memory </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints out the current memory state, including both the regions and blocks. Entries are printed in order, so there is an implied link from the topmost entry to the next, and so on. </p>
<p>print_memory prints the current memory state from our linked list of memory </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a6b5e8d2f1c37e5b43e4345586075be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a6b5e8d2f1c37e5b43e4345586075be">&#9670;&nbsp;</a></span>realloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>memory block of memory sectioned out into chunks, new space within a region, or NULL if there were any issues raised </p>
<p>The <a class="el" href="allocator_8c.html#a1a6b5e8d2f1c37e5b43e4345586075be" title="memory block of memory sectioned out into chunks, new space within a region, or NULL if there were an...">realloc()</a> function changes the size of the memory block pointed to by ptr to size bytes. The contents will be unchanged in the range from the start of the region up to the minimum of the old and new sizes </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>requested size </td></tr>
    <tr><td class="paramname">ptr</td><td>memory block pointed to by ptr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a512132f6d325316860cc6ac6bf0a366c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512132f6d325316860cc6ac6bf0a366c">&#9670;&nbsp;</a></span>reuse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* reuse </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reuse returns the first memory region that the requested allocation size fits into -which includes the size fo the <a class="el" href="structmem__block.html">mem_block</a> struct that will be split </p>
<p>Resusing blocks of memory within our linked list of memory </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>requested allocation size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22a50f56d0ca25cf15ae958e096a9776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a50f56d0ca25cf15ae958e096a9776">&#9670;&nbsp;</a></span>write_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_memory </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints out the current memory state, including both the regions and blocks. Entries are printed in order, so there is an implied link from the topmost entry to the next, and so on. </p>
<p>write_memory prints the current memory state from our linked list of memory without calling malloc </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fp</td><td>file pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
